# =============================================================================
# Production Requirements for RAG System
# =============================================================================
# Configuration: pgvector + BAAI/bge-large-en-v1.5 + Gemini LLM
# Install with: pip install --no-cache-dir -r requirements_production.txt
# =============================================================================

# Core RAG Dependencies
# -----------------------------------------------------------------------------
google-genai==0.2.0              # Gemini LLM for answer generation
sentence-transformers==2.2.2     # BAAI/bge-large-en-v1.5 embedding model
python-dotenv==1.0.0             # Environment variable management
numpy==1.24.3                    # Numerical operations for embeddings

# FastAPI Web Framework
# -----------------------------------------------------------------------------
fastapi==0.104.1                 # Modern web framework
pydantic==2.5.0                  # Data validation (FastAPI dependency)
python-multipart==0.0.6          # File upload support

# Production ASGI Server
# -----------------------------------------------------------------------------
uvicorn[standard]==0.24.0        # ASGI server with standard extras
gunicorn==21.2.0                 # Production WSGI server (recommended)
# Alternative: hypercorn==0.15.0 # ASGI server alternative

# PostgreSQL with pgvector
# -----------------------------------------------------------------------------
psycopg2-binary==2.9.9           # PostgreSQL driver with binary packages

# Document Parsing
# -----------------------------------------------------------------------------
PyPDF2==3.0.1                    # PDF parsing (lightweight)
pdfplumber==0.10.3               # Advanced PDF parsing (better tables)
python-docx==1.1.0               # Microsoft Word (.docx) parsing
openpyxl==3.1.2                  # Excel (.xlsx) parsing
pandas==2.1.3                    # Excel data processing

# HTTP and Networking
# -----------------------------------------------------------------------------
httpx==0.25.1                    # Async HTTP client (FastAPI dependency)
anyio==4.0.0                     # Async compatibility layer

# Security and Validation
# -----------------------------------------------------------------------------
pydantic-settings==2.1.0         # Settings management with validation
email-validator==2.1.0           # Email validation for pydantic

# Logging and Monitoring (Production Essentials)
# -----------------------------------------------------------------------------
python-json-logger==2.0.7        # Structured JSON logging
sentry-sdk[fastapi]==1.38.0      # Error tracking (optional but recommended)

# Performance and Optimization
# -----------------------------------------------------------------------------
orjson==3.9.10                   # Fast JSON parsing (optional speedup)

# Testing (Optional - for production validation)
# -----------------------------------------------------------------------------
# pytest==7.4.3                  # Testing framework
# pytest-asyncio==0.21.1         # Async test support
# httpx==0.25.1                  # API testing (already included above)

# =============================================================================
# System Requirements
# =============================================================================
# - Python 3.9-3.11 (recommended: 3.11)
# - PostgreSQL 12+ with pgvector extension
# - RAM: 4-8 GB minimum
# - Storage: 3-5 GB (model + dependencies)
# - CPU: 2+ cores (for embedding generation)
#
# =============================================================================
# Environment Variables Required
# =============================================================================
# GEMINI_API_KEY=your_key
# PGVECTOR_CONNECTION_STRING=postgresql://user:pass@host:port/db
#
# =============================================================================
# PostgreSQL Setup
# =============================================================================
# sudo apt-get install postgresql postgresql-contrib
# sudo -u postgres psql -c "CREATE DATABASE rag_db;"
# sudo -u postgres psql rag_db -c "CREATE EXTENSION vector;"
#
# =============================================================================
# Installation Commands
# =============================================================================
# python -m venv venv
# source venv/bin/activate  # Windows: venv\Scripts\activate
# pip install --upgrade pip
# pip install --no-cache-dir -r requirements_production.txt
#
# =============================================================================
# Running in Production
# =============================================================================
# Option 1: Gunicorn (recommended for production)
# gunicorn app:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000
#
# Option 2: Uvicorn directly
# uvicorn app:app --host 0.0.0.0 --port 8000 --workers 4
#
# Option 3: With systemd service
# See: https://fastapi.tiangolo.com/deployment/server-workers/
#
# =============================================================================
